import M from"./BnjRpxxy.js";import{d as h,c as b,o as i,a as _,b as m,n as y,e as v,u as l,f as j,g as d,t as g,h as O,i as W,j as V,k as Z,w as k,r as C,l as T,m as U,p as x,q as z,F as I,s as A,v as D,x as H,y as F,z as J,A as K,B as Q,C as X,T as Y,D as ee}from"./4j-qu-Dg.js";import"./B442RRPu.js";import"./DlAUqK2U.js";const te=["src"],P="block h-full w-full",N=h({__name:"Icon",props:{url:{},name:{},wrap:{type:Boolean},background:{},color:{}},setup(r){const e=r,t=b(()=>({"bg-fg/5 dark:bg-fg/10":(e==null?void 0:e.wrap)&&!(e!=null&&e.background),"p-2":e==null?void 0:e.wrap,[P]:!0,"border border-fg/10 dark:border-fg/15 rounded-2xl":!0})),n=b(()=>({background:e==null?void 0:e.background,color:e==null?void 0:e.color}));return(a,c)=>{const p=M;return i(),_("div",{class:y(l(t)),style:j(l(n))},[e!=null&&e.name?(i(),m(p,{key:0,name:e.name,class:y(P)},null,8,["name"])):e!=null&&e.url?(i(),_("img",{key:1,src:e.url,alt:"",class:y(P)},null,8,te)):v("",!0)],6)}}}),ne={class:"p-4 flex gap-4"},ae={class:"flex-shrink-0 flex"},L=h({__name:"Placeholder",props:{animate:{type:Boolean,default:!0}},setup(r){const e=r;return(t,n)=>(i(),_("div",ne,[d("div",ae,[d("div",{class:y(["self-center w-16 h-16 overflow-hidden rounded-2xl border border-black/5",{"animate-pulse":e.animate}])},n[0]||(n[0]=[d("div",{class:"bg-fg/5 dark:bg-fg/10 h-full w-full"},null,-1)]),2)]),d("div",null,[d("h3",{class:y(["text-lg mt-1",{"animate-pulse":e.animate}])},n[1]||(n[1]=[d("span",{class:"inline-block min-h-[1em] w-[110px] flex-auto cursor-wait bg-fg/5 dark:bg-fg/10 align-middle opacity-50 rounded"},null,-1)]),2),d("p",{class:y(["text-sm text-black/50",{"animate-pulse":e.animate}])},n[2]||(n[2]=[d("span",{class:"inline-block min-h-[1em] w-[160px] flex-auto cursor-wait bg-fg/5 dark:bg-fg/10 align-middle opacity-50 rounded"},null,-1)]),2)])]))}}),se=h({__name:"Status",props:{ping:{default:()=>({status:void 0,animation:!0,time:0})}},setup(r){const e=r,t=b(()=>[{"bg-green-400":e.ping.status},{"bg-red-400":e.ping.status===!1},{"bg-neutral-400":e.ping.status===void 0}]);return(n,a)=>(i(),_("span",{class:y(["relative inline-flex z-1 h-2.5 w-2.5 rounded-full bg-green-400",l(t)])},[!n.ping||n.ping.animation!==!1?(i(),_("span",{key:0,class:y(["absolute -z-1 inline-flex h-full w-full animate-ping rounded-full bg-green-400 opacity-75",l(t)])},null,2)):v("",!0)],2))}}),oe=h({__name:"Tag",props:{tag:{}},setup(r){const e=r,t=b(()=>typeof e.tag=="string"?{name:e.tag,color:"blue"}:e.tag),n=b(()=>[`bg-${t.value.color}-100`,`text-${t.value.color}-800`,"text-xs","font-medium","me-2","px-2.5","py-0.5","rounded",`dark:bg-${t.value.color}-900`,`dark:text-${t.value.color}-300`]);return(a,c)=>(i(),_("span",{class:y(l(n))},g(l(t).name),3))}});function re(r){try{const e=new URL(r);return!0}catch(e){console.error("Invalid URL:",e)}return!1}function le(r,e){const t=(e==null?void 0:e.immediate)||!1,n=((e==null?void 0:e.updateInterval)||60)*1e3,a=r.type||"base",{data:c,pending:p,status:s,refresh:o,execute:f}=O(`/api/services/${a}`,{immediate:t,query:{id:r.id},timeout:15e3},"$P6qENdZmAV"),{pause:u,resume:$}=W(o,n,{immediate:t});return{data:c,pending:p,status:s,execute:f,pauseUpdate:u,resumeUpdate:$}}const ie={class:"flex-shrink-0 flex"},ce={class:"self-center w-16 h-16 overflow-hidden"},ue={class:"text-lg pr-1 font-semibold line-clamp-1 flex gap-2 items-center"},de={class:"text-sm text-fg-dimmed line-clamp-1"},B=h({__name:"Index",props:{id:{},type:{},title:{},description:{},link:{},target:{},icon:{},status:{},tags:{},options:{}},setup(r,{expose:e}){const t=r,{$settings:n}=V(),a=b(()=>re(t.link||"")),c=b(()=>t.target||n.behaviour.target),p=b(()=>{var u;return((u=t.status)==null?void 0:u.enabled)||!!t.type||!1}),{data:s,pauseUpdate:o}=le(t,{immediate:p.value}),f=b(()=>!!(t.type&&!s.value));return e({data:s}),Z(o),(u,$)=>{const q=L,E=N,R=se,G=oe;return l(f)?(i(),m(q,{key:0})):(i(),m(D(l(a)?"a":"div"),{key:1,href:u.link,target:l(c),class:"p-4 flex gap-4 hover:bg-fg/5 dark:hover:bg-fg/9 rounded-2xl transition-all"},{default:k(()=>[d("div",ie,[d("div",ce,[C(u.$slots,"icon",{service:l(s)},()=>[u.icon?(i(),m(E,T(U({key:0},u.icon)),null,16)):v("",!0)])])]),d("div",null,[d("h3",ue,[C(u.$slots,"title",{service:l(s)},()=>[x(g(u.title),1)]),u.status&&u.status.enabled?C(u.$slots,"status",{key:0,data:l(s)},()=>{var w,S;return[z(R,{ping:{...(w=l(s))==null?void 0:w.ping,animation:(S=u.status)==null?void 0:S.animation}},null,8,["ping"])]}):v("",!0)]),d("p",de,[C(u.$slots,"description",{service:l(s)},()=>[x(g(u.description),1)])]),u.tags.length?(i(!0),_(I,{key:0},A(u.tags,(w,S)=>(i(),m(G,{key:S,tag:w},null,8,["tag"]))),128)):v("",!0)])]),_:3},8,["href","target"]))}}}),pe=h({__name:"IpApi",props:{options:{},id:{},type:{},title:{},description:{},link:{},target:{},icon:{},status:{},tags:{}},setup(r){const e=r;return(t,n)=>{var p;const a=N,c=B;return i(),m(c,T(F(e)),H({title:k(({service:s})=>{var o;return[x(g(((o=s==null?void 0:s.data)==null?void 0:o.ip)||""),1)]}),description:k(({service:s})=>{var o;return[x(g(((o=s==null?void 0:s.data)==null?void 0:o.place)||""),1)]}),_:2},[((p=e.options)==null?void 0:p.flagIcon)!==!1?{name:"icon",fn:k(({service:s})=>{var o;return[z(a,{name:`flag:${(o=s==null?void 0:s.data)==null?void 0:o.country}-1x1`},null,8,["name"])]}),key:"0"}:void 0]),1040)}}}),me=h({__name:"OpenWeatherMap",props:{options:{},id:{},type:{},title:{},description:{},link:{},target:{},icon:{},status:{},tags:{}},setup(r){const e=r,t=b(()=>{if(!e.icon)return{};const{name:a,...c}=e.icon;return c}),n=b(()=>{var a;return((a=e==null?void 0:e.options)==null?void 0:a.units)==="imperial"?"°F":"°C"});return(a,c)=>{const p=N,s=B;return i(),m(s,T(F(e)),{icon:k(({service:o})=>{var f;return[z(p,U({name:`wi:owm-${(f=o==null?void 0:o.data)==null?void 0:f.iconId}`},l(t)),null,16,["name"])]}),title:k(({service:o})=>{var f;return[x(g((f=o.data)==null?void 0:f.temp.toFixed(1))+" "+g(l(n)),1)]}),description:k(({service:o})=>{var f,u,$;return[x(g((f=o.data)!=null&&f.place?`${(u=o.data)==null?void 0:u.place},`:"")+" "+g(($=o.data)==null?void 0:$.description),1)]}),_:1},16)}}}),ge=Symbol.for("nuxt:client-only"),_e=h({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(r,{slots:e,attrs:t}){const n=J(!1);return K(()=>{n.value=!0}),Q(ge,!0),a=>{var o;if(n.value)return(o=e.default)==null?void 0:o.call(e);const c=e.fallback||e.placeholder;if(c)return c();const p=a.fallback||a.placeholder||"",s=a.fallbackTag||a.placeholderTag||"span";return _(s,t,p)}}}),fe=h({__name:"Item",props:{id:{},type:{},title:{},description:{},link:{},target:{},icon:{},status:{},tags:{},options:{},secrets:{},server:{}},setup(r){const e=r;function t(a){return a==="ip-api"?pe:a==="openweathermap"?me:B}const n=e.type?t(e.type):B;return(a,c)=>{const p=_e;return i(),m(p,null,{fallback:k(()=>[z(L,{animate:!1})]),default:k(()=>[(i(),m(D(l(n)),T(F(e)),null,16))]),_:1})}}}),be={class:"py-10"},he={key:0,class:"text-2xl font-light py-2 px-4"},ye=h({__name:"Group",props:{title:{},items:{},grid:{}},setup(r){const e=r,t=b(()=>["grid","grid-cols-1",`sm:grid-cols-${e.grid.small}`,`md:grid-cols-${e.grid.medium}`,`lg:grid-cols-${e.grid.large}`,`xl:grid-cols-${e.grid.xlarge}`,"gap-1","lg:gap-2","lg:gap-y-4"]);return(n,a)=>{const c=fe;return i(),_("div",be,[n.title?(i(),_("h2",he,g(n.title),1)):v("",!0),d("div",{class:y(l(t))},[(i(!0),_(I,null,A(n.items,p=>(i(),m(c,U({key:p.id,ref_for:!0},p),null,16))),128))],2)])}}}),ke={class:"fixed z-20 bottom-[30px] right-[30px] opacity-80 hover:opacity-100 transition-all"},ve={class:"z-1 relative text-end text-fg-dimmed"},xe=["href"],$e=h({__name:"Update",async setup(r){let e,t;const{data:n}=([e,t]=X(()=>O("/api/update","$IISPoeUvCs")),e=await e,t(),e);return(a,c)=>l(n)&&l(n).available?(i(),m(Y,{key:0,to:"body"},[d("div",ke,[c[1]||(c[1]=d("div",{class:"w-[160px] h-[160px] -z-1 rounded-full bg-brand-600 blur-3xl right-0 -bottom-20 absolute"},null,-1)),d("div",ve,[x(g(a.$t("update.message"))+" ",1),d("strong",null,g(l(n).version),1),c[0]||(c[0]=d("br",null,null,-1)),d("a",{href:`https://github.com/hywax/mafl/releases/tag/v${l(n).version}`,class:"border-b border-dashed",target:"_blank"},g(a.$t("update.visit")),9,xe)])])])):v("",!0)}}),Be=h({__name:"index",setup(r){const{$services:e,$settings:t}=V();if(t.error)throw ee({message:t.error});return(n,a)=>{const c=ye,p=$e;return i(),_(I,null,[(i(!0),_(I,null,A(l(e),(s,o)=>(i(),m(c,U({key:o,ref_for:!0},{...s,grid:l(t).layout.grid}),null,16))),128)),l(t).checkUpdates?(i(),m(p,{key:0})):v("",!0)],64)}}});export{Be as default};
